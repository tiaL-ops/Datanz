<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Facilities</title>
  <link rel="stylesheet" href="/styles/facilities.css"/>
</head>
<body>

  <header class="top-nav">
    <div class="logo"><a href="/">DATANZ</a></div>
    <ul class="nav-links">
      <li><a href="/">Home page</a></li>
      <li><a href="/auth?type=login">Login</a></li>

    </ul>
  </header>
<main class="scroll-container">
  <!-- Filter Form Section -->
  <section class="filter-container">
    <h1>Find the facility for you.</h1>

    <form action="/<%= gov ? 'government/' : '' %>facilities" method="GET" class="filter-form">
      <label class="filter-item">
        What is the maximum time you will wait?
        <input type="range" name="wait_time" min="0" max="140" value="60" id="waitTime"
               oninput="document.getElementById('waitValue').innerText = this.value + ' minutes';" />
        <span id="waitValue">60 minutes</span>
      </label>
      

      <label class="filter-item">
        How important is patient satisfaction for you (1‚Äì5)?
        <select name="satisfaction">
          <option value="">Not important</option>
          <% for (let i = 1; i <= 5; i++) { %>
            <option value="<%= i %>"><%= i %></option>
          <% } %>
        </select>
      </label>

      <label class="filter-item">
        How important is confidentiality for you?

        <select name="confidentiality">
          <option value="">Not important</option>
          <option value="somewhat">Somewhat</option>
          <option value="very">Very important</option>
        </select>
      </label>

      <label class="filter-item">
        How important is consent before a test for you?
        <select name="permission_before_exam">
          <option value="">Not important</option>
          <option value="somewhat">Somewhat</option>
          <option value="very">Very important</option>
        </select>
      </label>

      <label class="filter-item">
        How important is it to receive all necessary tests?
        <select name="received_all_tests">
          <option value="">Not important</option>
          <option value="somewhat">Somewhat</option>
          <option value="very">Very important</option>
        </select>
      </label>

      <label class="filter-item">
        How important is it to receive all necessary medicine?
        <select name="received_all_meds">
          <option value="">Not important</option>
          <option value="somewhat">Somewhat</option>
          <option value="very">Very important</option>
        </select>
      </label>

      <label class="filter-item">
        Accepts payment via:
        <select name="service_payment_mode">
          <option value="">Any</option>
          <option value="Free">Free</option>
          <option value="Cash">Cash</option>
          <option value="Insurance">Insurance</option>
        </select>
      </label>

      <button type="submit" class="filter-button">Search</button>
      <p class="view-link">
        OR <a href="/facilities/map-view">View Facilities Near You</a>
      </p>
    </form>
  </section>



  <!-- Facility Grid Section -->
  <section class="facility-header">
    <h1>All the facilities.</h1>
    <p>Don‚Äôt get overwhelmed, you can still look it up by name:</p>
    <input type="text" id="facilitySearch" placeholder="Facility Name" />
  </section>

  <section class="facility-grid">
    <!-- Pagination -->
    <div class="pagination">
      <% if (page > 1) { %>
        <a href="?page=<%= page - 1 %>" class="pagination-link">‚Üê Prev</a>
      <% } %>

      <span>Page <%= page %> of <%= Math.ceil(1000/ 50) %></span>

      <% if (page * 50 < 1000) { %>
        <a href="?page=<%= page + 1 %>" class="pagination-link">Next ‚Üí</a>
      <% } %>
    </div>

    <div class="facility-cards">
      <% facilities.forEach((facility) => { %>
        <div class="facility-card">
          <h2><%= facility.name %></h2>
          <p>üìç <%= facility.location || 'Unknown location' %></p>
          <p>üè• Type: <%= facility.type || 'Unknown' %></p>
          <a href="<%= gov ? '/government/facilities/' : '/facilities/' %><%= facility.facility_id %>">View Details</a>
        </div>
      <% }) %>
    </div>
  </section>
  </main>
<br>
  <button id="backToTop" class="back-to-top" title="Go to top">‚Üë</button>
  <script>
    const backToTopBtn = document.getElementById("backToTop");
    const scrollContainer = document.querySelector(".scroll-container");

    // Show the button when the scroll container is scrolled down
    scrollContainer.addEventListener("scroll", () => {

      if (scrollContainer.scrollTop > 0) {
        backToTopBtn.classList.add("show");
        console.log("done");
      } else {
        backToTopBtn.classList.remove("show");
      }
    });
  
    // Scroll to top of the container on click
    backToTopBtn.addEventListener("click", () => {
      scrollContainer.scrollTo({
        top: 0,
        behavior: "smooth"
      });
    });
  </script> 
</body>
</html>
